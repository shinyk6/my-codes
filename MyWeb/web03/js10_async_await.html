<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>async/await</title>
  </head>
  <body>
    <ul id="users"></ul>
    <script>
      // 비동기 코드를 동기적인 스타일로 작성할 수 있게 해준다. async/await
      // await 키워드를 만나면 비동기 완료 될 때까지의 함수 실행을 일시 중단하고 완료되면 결과를 리턴한다.
      async function loadUsers() {
        console.log("1. fetch 시작 전 ");
        const res = await fetch("https://jsonplaceholder.typicode.com/users");
        console.log("2. fetch 완료 후 ");

        const users = await res.json();
        console.log("3. json 변환 완료 후");

        users.slice(0, 3).forEach((user) => {
          const li = document.createElement("li");
          li.textContent = user.name;
          document.getElementById("users").appendChild(li);

          console.log(`${user.name} 추가`);
        });

        console.log("모든 사용자 추가 완료!!");
      }
      console.log("loadUser호출 전!");
      loadUsers();
      console.log("loadUser호출 완료!");
    </script>
  </body>
</html>
